{"changed":true,"filter":false,"title":"shift.rb","tooltip":"/app/models/shift.rb","value":"class Shift < ActiveRecord::Base\n\tbelongs_to :user\n\thas_one :posted_shift\n\tbefore_save :adjust_time_and_date\n\tPOSITIONS = [['Z1 GATES'], ['Z2 GATES'], ['Z3 GATES'], ['Z4 GATES'], ['CKIN DC'], ['CKIN US'], ['CKIN IT']]\n\n\tdef adjust_time_and_date\n\t\tself.start_time = DateTime.parse(\"#{date.to_date.to_s} #{start_time.to_s(:time)}\")\n\t\tself.finish_time = DateTime.parse(\"#{date.to_date.to_s} #{finish_time.to_s(:time)}\")\n\t\ts = SecureRandom.urlsafe_base64(8)\n\t\tself.shift_id = s\n\tend\n\n\tdef overlaps?(other)\n\t\t(start_time - other.finish_time) * (other.start_time - finish_time) > 0\n\tend\n\n\tdef as_json(options = {})\n    {\n      :id => self.id,\n      :title => self.position,\n      :start => start_time,\n      :end => finish_time,\n      :url => Rails.application.routes.url_helpers.shift_path(shift_id),\n    }\n  end\nend\n","undoManager":{"mark":-1,"position":2,"stack":[[{"group":"doc","deltas":[{"start":{"row":3,"column":34},"end":{"row":4,"column":0},"action":"insert","lines":["",""]},{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":34},"end":{"row":4,"column":0},"action":"remove","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":34},"end":{"row":3,"column":34},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1424616707029}